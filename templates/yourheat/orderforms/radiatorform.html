{% extends "base.html" %}

{% block content %}

{% if user.is_authenticated %}
    <div class = "container quote-form-container">

    <form id="input-finance" action="" method="post">
    {% csrf_token %}

    <h3>RADIATOR REQUIREMENTS</h3>
    
    <h5>Step {{ wizard.steps.step1 }} of {{ wizard.steps.count }}</h5>
    
    {{ wizard.management_form }}
    {% if wizard.form.forms %}
        {{ wizard.form.management_form }}
        {% for form in wizard.form.forms %}
          {{ form }}
        {% endfor %}
    {% else %}

    

    <div class = "row">
        <div class = "col-12">
            <div class="form-group">
                <label>{{ wizard.form.radiator_specification.label }}</label>
                {{ wizard.form.radiator_specification }}
                <!-- <div class="form-cust-rad-qty">
                    Qty: {{ wizard.form.cust_supply_radiator_quantity }}
                </div> -->
            </div>
        </div>
    </div>
    
    <div class = "row">
        <div class="col-12">
            <div class="boilerformbtns">
                {% if wizard.steps.prev %}
                <button name="wizard_goto_step" class="btn btn-secondary" type="submit" value="{{ wizard.steps.first }}" class="boilerbtn">First step</button>
                <button name="wizard_goto_step" class="btn btn-secondary" type="submit" value="{{ wizard.steps.prev }}" class="boilerbtn">Previous step</button>
                {% endif %}
                {% if wizard.steps.step1 != 10 %}
                <input class="btn btn-primary" id="next-step-btn" type="submit" value="Next Step" class="boilerbtn"/>
                {% else %}
                <input class="btn btn-primary" type="submit" value="Final Step" class="boilerbtn"/>
                {% endif %}
            </div>  
        </div>
    </div>

    <br>

    <div class = "row">
        <div class = "col-12">
            <div class="form-rad-group">
                <!-- <p class="radiator-section-headings" >Radiator / Location *</p>  -->
                <table>
                    <tr>
                        <td>Radiator</td>
                        <td>Style</td>
                        <td>Location</td>
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_1}}</td>
                        <td>{{wizard.form.sty_1}}</td>
                        <td>{{wizard.form.loc_1}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_2}}</td>
                        <td>{{wizard.form.sty_2}}</td>
                        <td>{{wizard.form.loc_2}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_3}}</td>
                        <td>{{wizard.form.sty_3}}</td>
                        <td>{{wizard.form.loc_3}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_4}}</td>
                        <td>{{wizard.form.sty_4}}</td>
                        <td>{{wizard.form.loc_4}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_5}}</td>
                        <td>{{wizard.form.sty_5}}</td>
                        <td>{{wizard.form.loc_5}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_6}}</td>
                        <td>{{wizard.form.sty_6}}</td>
                        <td>{{wizard.form.loc_6}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_7}}</td>
                        <td>{{wizard.form.sty_7}}</td>
                        <td>{{wizard.form.loc_7}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_8}}</td>
                        <td>{{wizard.form.sty_8}}</td>
                        <td>{{wizard.form.loc_8}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_9}}</td>
                        <td>{{wizard.form.sty_9}}</td>
                        <td>{{wizard.form.loc_9}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_10}}</td>
                        <td>{{wizard.form.sty_10}}</td>
                        <td>{{wizard.form.loc_10}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_11}}</td>
                        <td>{{wizard.form.sty_11}}</td>
                        <td>{{wizard.form.loc_11}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_12}}</td>
                        <td>{{wizard.form.sty_12}}</td>
                        <td>{{wizard.form.loc_12}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_13}}</td>
                        <td>{{wizard.form.sty_13}}</td>
                        <td>{{wizard.form.loc_13}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_14}}</td>
                        <td>{{wizard.form.sty_14}}</td>
                        <td>{{wizard.form.loc_14}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_15}}</td>
                        <td>{{wizard.form.sty_15}}</td>
                        <td>{{wizard.form.loc_15}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_16}}</td>
                        <td>{{wizard.form.sty_16}}</td>
                        <td>{{wizard.form.loc_16}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_17}}</td>
                        <td>{{wizard.form.sty_17}}</td>
                        <td>{{wizard.form.loc_17}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_18}}</td>
                        <td>{{wizard.form.sty_18}}</td>
                        <td>{{wizard.form.loc_18}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_19}}</td>
                        <td>{{wizard.form.sty_19}}</td>
                        <td>{{wizard.form.loc_19}}</td>    
                    </tr>
                    <tr>
                        <td>{{wizard.form.rad_20}}</td>
                        <td>{{wizard.form.sty_20}}</td>
                        <td>{{wizard.form.loc_20}}</td>    
                    </tr>
                    
                </table>
            </div>
        </div>
    </div>
    <br>
    <div class = "row">
        <div class = "col-5"> 
            <div class="form-rad-valve-group">
                <!-- <p class="radiator-section-headings">Thermostatic Radiator Valves *</p>  -->
                <table>
                    <tr>
                        <td>Thermostatic Radiator Valve</td>
                        <td>Qty</td>
                    </tr>
                    <tr>
                        <td>{{wizard.form.val_1}}</td>
                        <td>{{wizard.form.vaq_1}}</td>
                    </tr>
                    <tr>
                        <td>{{wizard.form.val_2}}</td>
                        <td>{{wizard.form.vaq_2}}</td>
                    </tr>
                    <tr>
                        <td>{{wizard.form.val_3}}</td>
                        <td>{{wizard.form.vaq_3}}</td>
                    </tr>
                    <tr>
                        <td>{{wizard.form.val_4}}</td>
                        <td>{{wizard.form.vaq_4}}</td>
                    </tr>
                    <tr>
                        <td>{{wizard.form.val_5}}</td>
                        <td>{{wizard.form.vaq_5}}</td>
                    </tr>
                    <tr>
                        <td>{{wizard.form.val_6}}</td>
                        <td>{{wizard.form.vaq_6}}</td>
                    </tr>
                    <tr>
                        <td>{{wizard.form.val_7}}</td>
                        <td>{{wizard.form.vaq_7}}</td>
                    </tr>
                    <tr>
                        <td>{{wizard.form.val_8}}</td>
                        <td>{{wizard.form.vaq_8}}</td>
                    </tr>
                    <tr>
                        <td>{{wizard.form.val_9}}</td>
                        <td>{{wizard.form.vaq_9}}</td>
                    </tr>
                    <tr>
                        <td>{{wizard.form.val_10}}</td>
                        <td>{{wizard.form.vaq_10}}</td>
                    </tr>
                    <tr>
                        <td>{{wizard.form.val_11}}</td>
                        <td>{{wizard.form.vaq_11}}</td>
                    </tr> 
                    <tr>
                        <td>{{wizard.form.val_12}}</td>
                        <td>{{wizard.form.vaq_12}}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <br>
    <div class = "row">

        <div class = "col-12">
            <div class="form-towel-group">
                <!-- <p class="radiator-section-headings">Towel Rail / Location *</p>  -->
                <table>
                    <tr>
                        <td width="180px">Towel Rail</td>
                        <td width="220px">Location</td>
                    </tr>
                    <tr>
                        <td width="180px">{{wizard.form.tow_1}}</td>
                        <td width="220px">{{wizard.form.trl_1}}</td>
                    </tr>
                    <tr>
                        <td width="180px">{{wizard.form.tow_2}}</td>
                        <td width="220px">{{wizard.form.trl_2}}</td>
                    </tr>
                    <tr>
                        <td width="180px">{{wizard.form.tow_3}}</td>
                        <td width="220px">{{wizard.form.trl_3}}</td>
                    </tr>
                    <tr>
                        <td width="180px">{{wizard.form.tow_4}}</td>
                        <td width="220px">{{wizard.form.trl_4}}</td>
                    </tr>
                </table>
            </div>        
        </div>
    </div>
    <br>        

{% endif %}
        
    <div class = "row">
        <div class="col-12">
            <div class="boilerformbtns">
                {% if wizard.steps.prev %}
                <button name="wizard_goto_step" class="btn btn-secondary" type="submit" value="{{ wizard.steps.first }}" class="boilerbtn">First step</button>
                <button name="wizard_goto_step" class="btn btn-secondary" type="submit" value="{{ wizard.steps.prev }}" class="boilerbtn">Previous step</button>
                {% endif %}
                {% if wizard.steps.step1 != 10 %}
                <input class="btn btn-primary" id="next-step-btn" type="submit" value="Next Step" class="boilerbtn"/>
                {% else %}
                <input class="btn btn-primary" type="submit" value="Final Step" class="boilerbtn"/>
                {% endif %}
            </div>  
        </div>
    </div>
    </form>
    <br>

</div> 
{% endif %} 

<script type="text/javascript">
    $(function () {
      $('[data-toggle="popover"]').popover()
    })
    
    $('.popover-dismiss').popover({
      trigger: 'focus'
    })

    radiator_handler();
    
    function radiator_handler() {
      //Create an input type dynamically.
    
    // document.forms[0].element.value
     //console.log(7-radiator_specification.value);

     console.log("Running");
    
     var no_rads_checkbox = document.getElementById('id_7-radiator_specification_0');
     var rads_req_checkbox = document.getElementById('id_7-radiator_specification_1');
     var thermo_rads_only_checkbox = document.getElementById('id_7-radiator_specification_2');
     var towel_rails_checkbox = document.getElementById('id_7-radiator_specification_3');
    //  var cust_to_provide_checkbox = document.getElementById('id_7-radiator_specification_4');
    
    if (no_rads_checkbox.checked) {
        document.getElementsByClassName("form-rad-group")[0].style.visibility = "hidden";
        document.getElementsByClassName("form-rad-valve-group")[0].style.visibility = "hidden";
        document.getElementsByClassName("form-towel-group")[0].style.visibility = "hidden";
        document.getElementById("id_7-radiator_specification_1").checked = false;
        document.getElementById("id_7-radiator_specification_2").checked = false;
        document.getElementById("id_7-radiator_specification_3").checked = false;
    } 
    if (rads_req_checkbox.checked) {
        document.getElementsByClassName("form-rad-group")[0].style.visibility = "visible";
        document.getElementsByClassName("form-rad-valve-group")[0].style.visibility = "visible";
        document.getElementById("id_7-radiator_specification_2").checked = false;
    }
    else {
        document.getElementsByClassName("form-rad-group")[0].style.visibility = "hidden";
        document.getElementsByClassName("form-rad-valve-group")[0].style.visibility = "hidden";
    }

    if (thermo_rads_only_checkbox.checked) {
        document.getElementsByClassName("form-rad-group")[0].style.visibility = "hidden";
        document.getElementById("id_7-radiator_specification_1").checked = false;
    }

    if (thermo_rads_only_checkbox.checked || rads_req_checkbox.checked) {
        document.getElementsByClassName("form-rad-valve-group")[0].style.visibility = "visible";
    }
    else {
        document.getElementsByClassName("form-rad-valve-group")[0].style.visibility = "hidden";
    }

    if (towel_rails_checkbox.checked) {
        document.getElementsByClassName("form-towel-group")[0].style.visibility = "visible";
    } 
    else {
        document.getElementsByClassName("form-towel-group")[0].style.visibility = "hidden";
    } 

    // if (cust_to_provide_checkbox.checked) {
    //     document.getElementsByClassName("form-rad-group")[0].style.visibility = "hidden";
    //     document.getElementsByClassName("form-rad-valve-group")[0].style.visibility = "hidden";
    //     document.getElementsByClassName("form-towel-group")[0].style.visibility = "hidden";
    //     document.getElementsByClassName("form-cust-rad-qty")[0].style.visibility = "visible";
    // } else {
    //     document.getElementsByClassName("form-cust-rad-qty")[0].style.visibility = "hidden";
    // }

    }

    // Code to filter dropdown on Towel rail sizes

    function delete_dropdown_elements(id) {

        document.getElementById(id).innerText = null;
    }

    function createOption(id, value) {

    el = document.createElement('option');
    el.value = value;
    el.innerHTML = value;
    
    document.getElementById(id).appendChild(el);
    }

    // Main code //

//     document.getElementById('id_7-towel_rail_width_1').addEventListener('change', function() {

//     delete_dropdown_elements('id_7-towel_rail_height_1');
//     createOption('id_7-towel_rail_height_1','-----');
//     if (document.getElementById('id_7-towel_rail_width_1').value == "450") {
//         createOption('id_7-towel_rail_height_1','900');
//         createOption('id_7-towel_rail_height_1','1000');
//         createOption('id_7-towel_rail_height_1','1200');    
//     }
//     if (document.getElementById('id_7-towel_rail_width_1').value == "600") {
//         createOption('id_7-towel_rail_height_1','1000');
//         createOption('id_7-towel_rail_height_1','1200');
//         createOption('id_7-towel_rail_height_1','1600');
//         createOption('id_7-towel_rail_height_1','1800');    
//     }
// });

//     document.getElementById('id_7-towel_rail_width_2').addEventListener('change', function() {

//     delete_dropdown_elements('id_7-towel_rail_height_2');
//     createOption('id_7-towel_rail_height_2','-----');
//     if (document.getElementById('id_7-towel_rail_width_2').value == "450") {
//         createOption('id_7-towel_rail_height_2','900');
//         createOption('id_7-towel_rail_height_2','1000');
//         createOption('id_7-towel_rail_height_2','1200');    
//     }
//     if (document.getElementById('id_7-towel_rail_width_2').value == "600") {
//         createOption('id_7-towel_rail_height_2','1000');
//         createOption('id_7-towel_rail_height_2','1200');
//         createOption('id_7-towel_rail_height_2','1600');
//         createOption('id_7-towel_rail_height_2','1800');    
//     }
// });

//     document.getElementById('id_7-towel_rail_width_3').addEventListener('change', function() {

//     delete_dropdown_elements('id_7-towel_rail_height_3');
//     createOption('id_7-towel_rail_height_3','-----');
//     if (document.getElementById('id_7-towel_rail_width_3').value == "450") {
//         createOption('id_7-towel_rail_height_3','900');
//         createOption('id_7-towel_rail_height_3','1000');
//         createOption('id_7-towel_rail_height_3','1200');    
//     }
//     if (document.getElementById('id_7-towel_rail_width_3').value == "600") {
//         createOption('id_7-towel_rail_height_3','1000');
//         createOption('id_7-towel_rail_height_3','1200');
//         createOption('id_7-towel_rail_height_3','1600');
//         createOption('id_7-towel_rail_height_3','1800');    
//     }
// }); 

//     document.getElementById('id_7-towel_rail_width_4').addEventListener('change', function() {

//     delete_dropdown_elements('id_7-towel_rail_height_4');
//     createOption('id_7-towel_rail_height_4','-----');
//     if (document.getElementById('id_7-towel_rail_width_4').value == "450") {
//         createOption('id_7-towel_rail_height_4','900');
//         createOption('id_7-towel_rail_height_4','1000');
//         createOption('id_7-towel_rail_height_4','1200');    
//     }
//     if (document.getElementById('id_7-towel_rail_width_4').value == "600") {
//         createOption('id_7-towel_rail_height_4','1000');
//         createOption('id_7-towel_rail_height_4','1200');
//         createOption('id_7-towel_rail_height_4','1600');
//         createOption('id_7-towel_rail_height_4','1800');    
//     }
// });

    </script>

    {% endblock %}